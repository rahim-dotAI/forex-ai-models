<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trade Beacon v2.0.3 - Elite Dashboard</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --bg-primary: #0a0e1a;
      --bg-secondary: #111827;
      --bg-tertiary: #1f2937;
      --border: #374151;
      --text-primary: #f9fafb;
      --text-secondary: #9ca3af;
      --text-muted: #6b7280;
      --accent-blue: #3b82f6;
      --accent-purple: #a855f7;
      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --info: #06b6d4;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
    }
    
    /* Navigation */
    .nav {
      position: sticky;
      top: 0;
      z-index: 1000;
      background: rgba(17, 24, 39, 0.95);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
      padding: 16px 32px;
    }
    
    .nav-container {
      max-width: 1800px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 24px;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 24px;
      font-weight: 900;
    }
    
    .logo-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    
    .nav-controls {
      display: flex;
      gap: 16px;
      align-items: center;
    }
    
    .status-badge {
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .status-live {
      background: rgba(16, 185, 129, 0.15);
      color: var(--success);
      border: 2px solid var(--success);
    }
    
    .status-stale {
      background: rgba(245, 158, 11, 0.15);
      color: var(--warning);
      border: 2px solid var(--warning);
    }
    
    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: currentColor;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.3; transform: scale(1.3); }
    }
    
    /* Container */
    .container {
      max-width: 1800px;
      margin: 0 auto;
      padding: 24px 32px;
    }
    
    /* Market Overview */
    .market-overview {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(168, 85, 247, 0.1));
      border: 1px solid var(--border);
      border-radius: 24px;
      padding: 32px;
      margin-bottom: 32px;
    }
    
    .overview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 24px;
      margin-top: 24px;
    }
    
    .overview-item h3 {
      font-size: 12px;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 8px;
      font-weight: 600;
    }
    
    .overview-item p {
      font-size: 28px;
      font-weight: 900;
      letter-spacing: -0.5px;
    }
    
    /* Mode Selector */
    .mode-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
      margin-bottom: 32px;
    }
    
    .mode-card {
      background: var(--bg-tertiary);
      border: 2px solid var(--border);
      border-radius: 20px;
      padding: 24px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .mode-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
      transform: scaleX(0);
      transition: transform 0.3s;
    }
    
    .mode-card:hover {
      border-color: var(--accent-blue);
      transform: translateY(-2px);
    }
    
    .mode-card.active {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2));
      border-color: var(--accent-blue);
      box-shadow: 0 8px 32px rgba(59, 130, 246, 0.3);
    }
    
    .mode-card.active::before {
      transform: scaleX(1);
    }
    
    .mode-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .mode-title {
      font-size: 20px;
      font-weight: 800;
    }
    
    .mode-badge {
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 700;
      background: rgba(59, 130, 246, 0.2);
      color: var(--accent-blue);
    }
    
    .mode-params {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      font-size: 13px;
      color: var(--text-secondary);
    }
    
    .mode-param {
      display: flex;
      justify-content: space-between;
    }
    
    .mode-param span:last-child {
      color: var(--text-primary);
      font-weight: 600;
    }
    
    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }
    
    .stat-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 24px;
      position: relative;
      overflow: hidden;
    }
    
    .stat-card::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 100px;
      height: 100px;
      background: radial-gradient(circle, rgba(59, 130, 246, 0.1), transparent);
      border-radius: 50%;
      transform: translate(30%, -30%);
    }
    
    .stat-label {
      font-size: 12px;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 12px;
      font-weight: 600;
    }
    
    .stat-value {
      font-size: 36px;
      font-weight: 900;
      letter-spacing: -1px;
      line-height: 1;
    }
    
    .stat-change {
      margin-top: 8px;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    
    .stat-change.positive { color: var(--success); }
    .stat-change.negative { color: var(--danger); }
    
    /* Signals Section */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }
    
    .section-title {
      font-size: 24px;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .signal-count {
      background: var(--bg-secondary);
      color: var(--accent-blue);
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 700;
    }
    
    .filters {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    
    .filter-btn {
      padding: 8px 16px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: var(--bg-secondary);
      color: var(--text-primary);
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.2s;
    }
    
    .filter-btn:hover {
      border-color: var(--accent-blue);
      background: var(--bg-tertiary);
    }
    
    .filter-btn.active {
      background: var(--accent-blue);
      border-color: var(--accent-blue);
      color: white;
    }
    
    /* Signals Grid */
    .signals-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }
    
    .signal-card {
      background: var(--bg-tertiary);
      border-radius: 20px;
      padding: 24px;
      position: relative;
      transition: all 0.3s;
      border-left: 4px solid transparent;
    }
    
    .signal-card.buy {
      border-left-color: var(--success);
    }
    
    .signal-card.sell {
      border-left-color: var(--danger);
    }
    
    .signal-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
    }
    
    .signal-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 20px;
    }
    
    .signal-pair {
      font-size: 24px;
      font-weight: 900;
      letter-spacing: -0.5px;
    }
    
    .signal-direction {
      padding: 6px 14px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 800;
      letter-spacing: 0.5px;
    }
    
    .direction-buy {
      background: rgba(16, 185, 129, 0.2);
      color: var(--success);
      border: 2px solid var(--success);
    }
    
    .direction-sell {
      background: rgba(239, 68, 68, 0.2);
      color: var(--danger);
      border: 2px solid var(--danger);
    }
    
    .signal-meta {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .meta-badge {
      padding: 4px 10px;
      border-radius: 8px;
      font-size: 11px;
      font-weight: 700;
      background: var(--bg-secondary);
      color: var(--text-secondary);
    }
    
    .confidence-section {
      margin-bottom: 20px;
    }
    
    .confidence-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    
    .confidence-label {
      font-size: 14px;
      font-weight: 700;
      color: var(--text-secondary);
    }
    
    .confidence-score {
      font-size: 20px;
      font-weight: 900;
    }
    
    .confidence-bar {
      height: 8px;
      background: var(--bg-secondary);
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }
    
    .confidence-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
      transition: width 0.5s ease;
      border-radius: 4px;
    }
    
    .price-grid {
      background: var(--bg-secondary);
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 16px;
    }
    
    .price-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      font-size: 14px;
    }
    
    .price-row:not(:last-child) {
      border-bottom: 1px solid var(--border);
    }
    
    .price-label {
      color: var(--text-secondary);
      font-weight: 600;
    }
    
    .price-value {
      font-weight: 800;
      font-family: 'Courier New', monospace;
    }
    
    .signal-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      color: var(--text-secondary);
    }
    
    .risk-reward {
      font-weight: 700;
      color: var(--text-primary);
    }
    
    /* Empty State */
    .empty-state {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 24px;
      padding: 80px 40px;
      text-align: center;
    }
    
    .empty-icon {
      font-size: 64px;
      margin-bottom: 24px;
      opacity: 0.5;
    }
    
    .empty-title {
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 12px;
    }
    
    .empty-message {
      font-size: 16px;
      color: var(--text-secondary);
      max-width: 500px;
      margin: 0 auto;
    }
    
    /* Loading */
    .loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 60vh;
      gap: 24px;
    }
    
    .spinner {
      width: 60px;
      height: 60px;
      border: 4px solid var(--border);
      border-top-color: var(--accent-blue);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Responsive */
    @media (max-width: 1200px) {
      .signals-grid {
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      }
    }
    
    @media (max-width: 768px) {
      .nav {
        padding: 12px 20px;
      }
      
      .container {
        padding: 20px;
      }
      
      .logo {
        font-size: 20px;
      }
      
      .signals-grid {
        grid-template-columns: 1fr;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
      
      .overview-grid {
        grid-template-columns: 1fr;
      }
      
      .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-container">
      <div class="logo">
        <div class="logo-icon">üìä</div>
        <div>Trade<span style="background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Beacon</span></div>
      </div>
      <div class="nav-controls">
        <div class="status-badge status-live" id="status">
          <div class="status-dot"></div>
          <span>LOADING</span>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Container -->
  <div class="container">
    <div id="app">
      <div class="loading">
        <div class="spinner"></div>
        <div style="font-size: 20px; font-weight: 700; color: var(--text-secondary);">Loading Trade Beacon v2.0.3...</div>
      </div>
    </div>
  </div>

  <script>
    // State
    let data = null;
    let currentMode = localStorage.getItem('tradeBeaconMode') || 'aggressive';
    let confidenceFilter = 'ALL';
    let directionFilter = 'ALL';

    // API URLs
    const API_URLS = [
      './signal_state/dashboard_state.json',
      'signal_state/dashboard_state.json',
      'https://raw.githubusercontent.com/rahim-dotAI/forex-ai-models/main/signal_state/dashboard_state.json'
    ];

    // Configuration
    const CONFIG = {
      aggressive: {
        threshold: 48,
        min_adx: 20,
        rsi_oversold: 35,
        rsi_overbought: 65,
        min_volume_ratio: 1.1,
        min_risk_reward: 1.5
      },
      conservative: {
        threshold: 58,
        min_adx: 25,
        rsi_oversold: 30,
        rsi_overbought: 70,
        min_volume_ratio: 1.3,
        min_risk_reward: 2.0
      }
    };

    // Fetch data
    async function fetchData() {
      for (const url of API_URLS) {
        try {
          const response = await fetch(url + '?t=' + Date.now(), {
            cache: 'no-store',
            headers: { 'Cache-Control': 'no-cache' }
          });
          
          if (!response.ok) continue;
          
          const json = await response.json();
          if (json && json.signals) {
            data = json;
            updateStatus('LIVE');
            render();
            return;
          }
        } catch (e) {
          console.warn('Fetch failed:', url, e);
        }
      }
      
      updateStatus('STALE');
      renderError();
    }

    // Update status badge
    function updateStatus(status) {
      const statusEl = document.getElementById('status');
      const isLive = status === 'LIVE';
      
      statusEl.className = `status-badge ${isLive ? 'status-live' : 'status-stale'}`;
      statusEl.innerHTML = `
        <div class="status-dot"></div>
        <span>${status}</span>
      `;
    }

    // Filter signals by mode
    function filterSignalsByMode(signals) {
      const config = CONFIG[currentMode];
      
      return signals.filter(signal => {
        // Check if signal has eligible_modes (backend-calculated)
        if (signal.eligible_modes && Array.isArray(signal.eligible_modes)) {
          return signal.eligible_modes.includes(currentMode);
        }
        
        // Fallback to manual filtering
        if (signal.score < config.threshold) return false;
        if (signal.adx != null && signal.adx < config.min_adx) return false;
        if (signal.volume_ratio != null && signal.volume_ratio < config.min_volume_ratio) return false;
        if (signal.risk_reward != null && signal.risk_reward < config.min_risk_reward) return false;
        
        return true;
      });
    }

    // Filter signals
    function filterSignals(signals) {
      let filtered = filterSignalsByMode(signals);
      
      if (confidenceFilter !== 'ALL') {
        filtered = filtered.filter(s => s.confidence === confidenceFilter);
      }
      
      if (directionFilter !== 'ALL') {
        filtered = filtered.filter(s => s.direction === directionFilter);
      }
      
      return filtered.sort((a, b) => b.score - a.score);
    }

    // Set mode
    function setMode(mode) {
      currentMode = mode;
      localStorage.setItem('tradeBeaconMode', mode);
      render();
    }

    // Set filter
    function setFilter(type, value) {
      if (type === 'confidence') {
        confidenceFilter = value;
      } else if (type === 'direction') {
        directionFilter = value;
      }
      render();
    }

    // Render dashboard
    function render() {
      if (!data) return;

      const allSignals = data.signals || [];
      const filteredSignals = filterSignals(allSignals);
      const stats = data.stats || {};
      const riskMgmt = data.risk_management || {};
      const marketState = data.market_state || {};
      
      const session = data.session || 'UNKNOWN';
      const volatility = marketState.volatility || 'NORMAL';
      const sentiment = marketState.sentiment_bias || 'MIXED';

      document.getElementById('app').innerHTML = `
        <!-- Market Overview -->
        <div class="market-overview">
          <h2 style="font-size: 20px; font-weight: 800; margin-bottom: 8px;">üìä Market Pulse</h2>
          <p style="color: var(--text-secondary); margin-bottom: 24px;">Real-time forex intelligence ‚Ä¢ v2.0.3</p>
          
          <div class="overview-grid">
            <div class="overview-item">
              <h3>Active Session</h3>
              <p style="color: var(--accent-blue);">${session}</p>
            </div>
            <div class="overview-item">
              <h3>Market Volatility</h3>
              <p style="color: ${volatility === 'HIGH' ? 'var(--danger)' : volatility === 'CALM' ? 'var(--success)' : 'var(--warning)'};">${volatility}</p>
            </div>
            <div class="overview-item">
              <h3>Market Sentiment</h3>
              <p style="color: ${sentiment === 'BULLISH' ? 'var(--success)' : sentiment === 'BEARISH' ? 'var(--danger)' : 'var(--text-secondary)'};">${sentiment}</p>
            </div>
            <div class="overview-item">
              <h3>Active Mode</h3>
              <p style="color: var(--accent-purple);">${currentMode.toUpperCase()}</p>
            </div>
          </div>
        </div>

        <!-- Mode Selector -->
        <div class="mode-selector">
          <div class="mode-card ${currentMode === 'aggressive' ? 'active' : ''}" onclick="setMode('aggressive')">
            <div class="mode-header">
              <div class="mode-title">‚ö° Aggressive</div>
              <div class="mode-badge">HIGH VOLUME</div>
            </div>
            <div class="mode-params">
              <div class="mode-param"><span>Score Threshold</span><span>‚â•48</span></div>
              <div class="mode-param"><span>Min ADX</span><span>‚â•20</span></div>
              <div class="mode-param"><span>Min R:R</span><span>‚â•1.5</span></div>
              <div class="mode-param"><span>Volume Ratio</span><span>‚â•1.1</span></div>
            </div>
          </div>
          
          <div class="mode-card ${currentMode === 'conservative' ? 'active' : ''}" onclick="setMode('conservative')">
            <div class="mode-header">
              <div class="mode-title">üõ°Ô∏è Conservative</div>
              <div class="mode-badge">HIGH QUALITY</div>
            </div>
            <div class="mode-params">
              <div class="mode-param"><span>Score Threshold</span><span>‚â•58</span></div>
              <div class="mode-param"><span>Min ADX</span><span>‚â•25</span></div>
              <div class="mode-param"><span>Min R:R</span><span>‚â•2.0</span></div>
              <div class="mode-param"><span>Volume Ratio</span><span>‚â•1.3</span></div>
            </div>
          </div>
        </div>

        <!-- Performance Stats -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Active Signals</div>
            <div class="stat-value" style="color: var(--accent-blue);">${filteredSignals.length}</div>
            <div class="stat-change" style="color: var(--text-secondary);">
              ${allSignals.length} total across all modes
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-label">Win Rate</div>
            <div class="stat-value" style="color: var(--success);">${(stats.win_rate || 0).toFixed(1)}%</div>
            <div class="stat-change ${stats.win_rate >= 55 ? 'positive' : 'negative'}">
              ${stats.total_trades || 0} total trades
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-label">Total Pips</div>
            <div class="stat-value" style="color: var(--warning);">${(stats.total_pips || 0).toFixed(1)}</div>
            <div class="stat-change ${stats.total_pips > 0 ? 'positive' : 'negative'}">
              W: ${stats.wins || 0} ‚Ä¢ L: ${stats.losses || 0}
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-label">Daily Pips</div>
            <div class="stat-value" style="color: var(--info);">${(riskMgmt.daily_pips || 0).toFixed(1)}</div>
            <div class="stat-change" style="color: var(--text-secondary);">
              Risk: ${(riskMgmt.total_risk_pips || 0).toFixed(1)} pips
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-label">Avg Risk:Reward</div>
            <div class="stat-value" style="color: var(--accent-purple);">${(riskMgmt.average_risk_reward || 0).toFixed(2)}</div>
            <div class="stat-change ${riskMgmt.average_risk_reward >= 2 ? 'positive' : 'negative'}">
              ${riskMgmt.average_risk_reward >= 2 ? '‚úì Excellent' : '‚ö† Fair'}
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-label">Max Drawdown</div>
            <div class="stat-value" style="color: var(--danger);">${(riskMgmt.max_drawdown || 0).toFixed(1)}</div>
            <div class="stat-change" style="color: var(--text-secondary);">
              pips (lifetime)
            </div>
          </div>
        </div>

        <!-- Signals Section -->
        <div class="section-header">
          <div class="section-title">
            üéØ Active Signals
            <span class="signal-count">${filteredSignals.length}</span>
          </div>
          
          <div class="filters">
            <button class="filter-btn ${directionFilter === 'ALL' ? 'active' : ''}" onclick="setFilter('direction', 'ALL')">All</button>
            <button class="filter-btn ${directionFilter === 'BUY' ? 'active' : ''}" onclick="setFilter('direction', 'BUY')">Buy Only</button>
            <button class="filter-btn ${directionFilter === 'SELL' ? 'active' : ''}" onclick="setFilter('direction', 'SELL')">Sell Only</button>
            <button class="filter-btn ${confidenceFilter === 'ALL' ? 'active' : ''}" onclick="setFilter('confidence', 'ALL')">All Confidence</button>
            <button class="filter-btn ${confidenceFilter === 'EXCELLENT' ? 'active' : ''}" onclick="setFilter('confidence', 'EXCELLENT')">Excellent</button>
          </div>
        </div>

        ${filteredSignals.length === 0 ? renderEmptyState() : renderSignals(filteredSignals)}
      `;
    }

    // Render signals
    function renderSignals(signals) {
      return `
        <div class="signals-grid">
          ${signals.map(signal => `
            <div class="signal-card ${signal.direction.toLowerCase()}">
              <div class="signal-header">
                <div class="signal-pair">${signal.pair}</div>
                <div class="signal-direction direction-${signal.direction.toLowerCase()}">${signal.direction}</div>
              </div>
              
              <div class="signal-meta">
                <div class="meta-badge">${signal.session || 'N/A'}</div>
                <div class="meta-badge">${signal.hold_time || 'INTRADAY'}</div>
                ${signal.metadata?.signal_type ? `<div class="meta-badge">${signal.metadata.signal_type.toUpperCase()}</div>` : ''}
              </div>
              
              <div class="confidence-section">
                <div class="confidence-header">
                  <div class="confidence-label">${signal.confidence || 'MODERATE'}</div>
                  <div class="confidence-score">${signal.score}</div>
                </div>
                <div class="confidence-bar">
                  <div class="confidence-fill" style="width: ${Math.min(signal.score, 100)}%"></div>
                </div>
              </div>
              
              <div class="price-grid">
                <div class="price-row">
                  <div class="price-label">Entry</div>
                  <div class="price-value">${(signal.entry_price || 0).toFixed(5)}</div>
                </div>
                <div class="price-row">
                  <div class="price-label" style="color: var(--danger);">Stop Loss</div>
                  <div class="price-value" style="color: var(--danger);">${(signal.sl || 0).toFixed(5)}</div>
                </div>
                <div class="price-row">
                  <div class="price-label" style="color: var(--success);">Take Profit</div>
                  <div class="price-value" style="color: var(--success);">${(signal.tp || 0).toFixed(5)}</div>
                </div>
              </div>
              
              <div class="signal-footer">
                <div>
                  <span style="color: var(--text-secondary);">R:R</span>
                  <span class="risk-reward">${(signal.risk_reward || 0).toFixed(2)}</span>
                </div>
                <div style="font-size: 11px;">
                  ADX: <strong>${(signal.adx || 0).toFixed(1)}</strong> ‚Ä¢ 
                  RSI: <strong>${(signal.rsi || 0).toFixed(1)}</strong>
                </div>
              </div>
              
              ${signal.freshness ? `
                <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border); font-size: 11px; color: var(--text-secondary);">
                  ${signal.freshness.status} ‚Ä¢ ${signal.freshness.age_minutes.toFixed(0)}m ago
                </div>
              ` : ''}
            </div>
          `).join('')}
        </div>
      `;
    }

    // Render empty state
    function renderEmptyState() {
      return `
        <div class="empty-state">
          <div class="empty-icon">üí§</div>
          <div class="empty-title">No Signals Available</div>
          <div class="empty-message">
            Market conditions don't meet quality standards in <strong>${currentMode.toUpperCase()}</strong> mode.
            Try switching modes or adjusting filters.
          </div>
        </div>
      `;
    }

    // Render error
    function renderError() {
      document.getElementById('app').innerHTML = `
        <div class="empty-state">
          <div class="empty-icon">‚ö†Ô∏è</div>
          <div class="empty-title">Connection Error</div>
          <div class="empty-message">
            Unable to fetch signal data. Retrying automatically...
          </div>
        </div>
      `;
    }

    // Initialize
    fetchData();
    setInterval(fetchData, 15000); // Refresh every 15 seconds
  </script>
</body>
</html>
