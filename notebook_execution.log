üìñ Reading notebook: AI_Forex_Brain_2.ipynb
‚úÖ Loaded 10 cells
   - Code cells: 10
   - Markdown cells: 0

üöÄ Executing notebook...
============================================================

============================================================
‚ùå ERROR: Cell execution failed!
Cell index: unknown
Error: An error occurred while executing the following cell:
------------------
# ======================================================
# üîÑ GitHub Sync (Environment-Aware)
# ======================================================
import os
import subprocess
import shutil
from pathlib import Path
import urllib.parse

# Use variables from initialization cell
GITHUB_USERNAME = "rahim-dotAI"
GITHUB_REPO = "forex-ai-models"
BRANCH = "main"

print(f"üîß Running in: {ENV_NAME}")
print(f"üìÇ Working directory: {os.getcwd()}")

# ======================================================
# GitHub Token
# ======================================================
FOREX_PAT = os.environ.get("FOREX_PAT")

if not FOREX_PAT and IN_COLAB:
    try:
        from google.colab import userdata
        FOREX_PAT = userdata.get("FOREX_PAT")
        if FOREX_PAT:
            os.environ["FOREX_PAT"] = FOREX_PAT
            print("üîê Loaded FOREX_PAT from Colab secret.")
    except ImportError:
        pass

if not FOREX_PAT:
    print("‚ö†Ô∏è Warning: FOREX_PAT not found. Git operations may fail.")
else:
    SAFE_PAT = urllib.parse.quote(FOREX_PAT)
    REPO_URL = f"https://{GITHUB_USERNAME}:{SAFE_PAT}@github.com/{GITHUB_USERNAME}/{GITHUB_REPO}.git"

# ======================================================
# Handle Repository Based on Environment
# ======================================================
if IN_GHA:
    # GitHub Actions: Already in the repo
    print("‚úÖ Running in GitHub Actions - repository already checked out")
    print(f"üìÇ Current directory: {Path.cwd()}")

elif IN_COLAB:
    # Google Colab: Need to clone
    REPO_FOLDER = SAVE_FOLDER

    if not (REPO_FOLDER / ".git").exists():
        print(f"üîó Cloning repository to {REPO_FOLDER}...")
        env = os.environ.copy()
        env["GIT_LFS_SKIP_SMUDGE"] = "1"

        try:
            subprocess.run(
                ["git", "clone", REPO_URL, str(REPO_FOLDER)],
                check=True,
                env=env,
                capture_output=True,
                text=True
            )
            print(f"‚úÖ Repository cloned successfully")
        except subprocess.CalledProcessError as e:
            print(f"‚ö†Ô∏è Clone failed: {e.stderr}")
            print("Continuing with existing directory...")
    else:
        print("‚úÖ Repository already exists, pulling latest changes...")
        try:
            subprocess.run(["git", "pull", "origin", BRANCH], check=True, cwd=REPO_FOLDER)
        except subprocess.CalledProcessError:
            print("‚ö†Ô∏è Pull failed, continuing anyway...")

    # Remove LFS for Colab
    print("‚öôÔ∏è Configuring Git LFS...")
    try:
        subprocess.run(["git", "lfs", "uninstall"], check=False, cwd=REPO_FOLDER)
        subprocess.run(
            ["git", "lfs", "migrate", "export", "--include=*.csv"],
            check=False,
            cwd=REPO_FOLDER
        )
        print("‚úÖ LFS configuration updated")
    except Exception as e:
        print(f"‚ö†Ô∏è LFS setup warning: {e}")

else:
    # Local environment
    print("‚úÖ Running locally")
    if not (SAVE_FOLDER / ".git").exists():
        print("‚ö†Ô∏è Not a git repository. Initialize manually if needed.")

# ======================================================
# Git Configuration
# ======================================================
GIT_USER_NAME = os.environ.get("GIT_USER_NAME", "Forex AI Bot")
GIT_USER_EMAIL = os.environ.get("GIT_USER_EMAIL", "nakatonabira3@gmail.com")

subprocess.run(["git", "config", "--global", "user.name", GIT_USER_NAME], check=False)
subprocess.run(["git", "config", "--global", "user.email", GIT_USER_EMAIL], check=False)
subprocess.run(["git", "config", "--global", "advice.detachedHead", "false"], check=False)

print(f"‚úÖ Git configured: {GIT_USER_NAME} <{GIT_USER_EMAIL}>")

# ======================================================
# Verify Working Environment
# ======================================================
print("\nüßæ Environment Summary:")
print(f"‚Ä¢ Environment: {ENV_NAME}")
print(f"‚Ä¢ Working Directory: {os.getcwd()}")
print(f"‚Ä¢ Repository: https://github.com/{GITHUB_USERNAME}/{GITHUB_REPO}")
print(f"‚Ä¢ Git repo exists: {(Path.cwd() / '.git').exists()}")
print("‚úÖ Setup completed successfully")
------------------


[31m---------------------------------------------------------------------------[39m
[31mNameError[39m                                 Traceback (most recent call last)
[36mCell[39m[36m [39m[32mIn[1][39m[32m, line 15[39m
[32m     12[39m GITHUB_REPO = [33m"[39m[33mforex-ai-models[39m[33m"[39m
[32m     13[39m BRANCH = [33m"[39m[33mmain[39m[33m"[39m
[32m---> [39m[32m15[39m [38;5;28mprint[39m([33mf[39m[33m"[39m[33müîß Running in: [39m[38;5;132;01m{[39;00m[43mENV_NAME[49m[38;5;132;01m}[39;00m[33m"[39m)
[32m     16[39m [38;5;28mprint[39m([33mf[39m[33m"[39m[33müìÇ Working directory: [39m[38;5;132;01m{[39;00mos.getcwd()[38;5;132;01m}[39;00m[33m"[39m)
[32m     18[39m [38;5;66;03m# ======================================================[39;00m
[32m     19[39m [38;5;66;03m# GitHub Token[39;00m
[32m     20[39m [38;5;66;03m# ======================================================[39;00m

[31mNameError[39m: name 'ENV_NAME' is not defined

============================================================
