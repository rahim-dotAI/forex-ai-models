<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trade Beacon ‚Äî Neural Command Center</title>

<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
    --violet:#8b5cf6;
    --pink:#ec4899;
    --cyan:#06b6d4;
    --green:#10b981;
    --red:#ef4444;
    --amber:#f59e0b;
}
*{margin:0;padding:0;box-sizing:border-box}
body{
    font-family:'Space Grotesk',sans-serif;
    background:#07070d;
    color:#fff;
    overflow-x:hidden;
}
canvas{
    position:fixed;
    inset:0;
    z-index:0;
    opacity:.35;
}
.container{
    position:relative;
    z-index:1;
    max-width:1900px;
    margin:auto;
    padding:36px;
}
.glass{
    background:linear-gradient(135deg,rgba(139,92,246,.08),rgba(236,72,153,.05));
    backdrop-filter:blur(28px);
    border:1px solid rgba(139,92,246,.25);
    border-radius:30px;
}
.header{
    padding:44px;
    margin-bottom:32px;
}
.header h1{
    font-size:3.8rem;
    background:linear-gradient(135deg,var(--violet),var(--pink),var(--cyan));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}
.sub{
    opacity:.75;
    margin-top:10px;
}
.live{
    margin-top:18px;
    display:inline-flex;
    align-items:center;
    gap:12px;
    padding:10px 22px;
    border-radius:22px;
    background:rgba(16,185,129,.15);
    border:1px solid rgba(16,185,129,.4);
}
.dot{
    width:10px;height:10px;border-radius:50%;
    background:var(--green);
    animation:pulse 1.4s infinite;
}
@keyframes pulse{50%{opacity:.3}}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
    gap:24px;
    margin-bottom:34px;
}
.card{
    padding:30px;
    border-radius:24px;
    background:linear-gradient(135deg,rgba(255,255,255,.04),rgba(0,0,0,.2));
    border:1px solid rgba(139,92,246,.25);
}
.card span{
    font-size:.85rem;
    opacity:.7;
}
.card h2{
    font-size:3rem;
    margin-top:10px;
}
.section{
    padding:40px;
    margin-bottom:34px;
}
.section h2{
    font-size:2.2rem;
    margin-bottom:24px;
}
.signal{
    border:2px solid rgba(139,92,246,.35);
    border-radius:24px;
    padding:34px;
    margin-bottom:24px;
    transition:.3s;
}
.signal:hover{
    transform:translateY(-4px);
    box-shadow:0 20px 60px rgba(139,92,246,.35);
}
.signal-head{
    display:flex;
    justify-content:space-between;
    flex-wrap:wrap;
    gap:20px;
}
.badge{
    padding:6px 14px;
    border-radius:999px;
    font-weight:700;
}
.buy{background:var(--green)}
.sell{background:var(--red)}
.grid-3{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
    gap:16px;
    margin-top:24px;
}
.box{
    padding:18px;
    border-radius:16px;
    background:rgba(255,255,255,.04);
    text-align:center;
}
.api{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:20px;
}
.bar{
    height:10px;
    border-radius:10px;
    background:rgba(255,255,255,.1);
    overflow:hidden;
    margin-top:12px;
}
.fill{
    height:100%;
}
footer{
    text-align:center;
    opacity:.6;
    padding:40px;
}
</style>
</head>

<body>

<canvas id="bg"></canvas>
<div class="container" id="app"></div>

<script>
/* ================= CONFIG ================= */
const CONFIG = JSON.parse(localStorage.getItem("trade_beacon_config"));
const BASE = `https://raw.githubusercontent.com/${CONFIG.username}/${CONFIG.repo}/${CONFIG.branch}/signal_state/`;

/* ================= BACKGROUND ================= */
const c=document.getElementById("bg"),x=c.getContext("2d");
c.width=innerWidth;c.height=innerHeight;
class P{constructor(){this.x=Math.random()*c.width;this.y=Math.random()*c.height;this.vx=Math.random()-.5;this.vy=Math.random()-.5;this.r=Math.random()*2}}
const ps=[...Array(140)].map(()=>new P());
function anim(){
    x.clearRect(0,0,c.width,c.height);
    ps.forEach(p=>{
        p.x+=p.vx;p.y+=p.vy;
        if(p.x<0)p.x=c.width;if(p.x>c.width)p.x=0;
        if(p.y<0)p.y=c.height;if(p.y>c.height)p.y=0;
        x.fillStyle="rgba(139,92,246,.6)";
        x.beginPath();x.arc(p.x,p.y,p.r,0,Math.PI*2);x.fill();
    });
    requestAnimationFrame(anim);
}
anim();

/* ================= LOAD ALL STATE ================= */
async function loadState(){
    const [
        system,
        dashboard,
        signals,
        news,
        price
    ] = await Promise.all([
        fetch(BASE+"system_state.json").then(r=>r.json()),
        fetch(BASE+"dashboard_state.json").then(r=>r.json()),
        fetch(BASE+"active_signals.json").then(r=>r.json()),
        fetch(BASE+"news_api_calls.json").then(r=>r.json()),
        fetch(BASE+"price_source_rotation.json").then(r=>r.json())
    ]);
    return {system,dashboard,signals,news,price};
}

/* ================= RENDER ================= */
function render(s){
document.getElementById("app").innerHTML=`
<div class="glass header">
<h1>‚ö° TRADE BEACON</h1>
<div class="sub">${CONFIG.username}/${CONFIG.repo}</div>
<div class="live"><div class="dot"></div>LIVE ‚Ä¢ Neural Sync</div>
</div>

<div class="grid">
<div class="card"><span>SYSTEM</span><h2>${s.system.running?"LIVE":"HALTED"}</h2></div>
<div class="card"><span>MODE</span><h2>${s.system.mode}</h2></div>
<div class="card"><span>WIN RATE</span><h2>${s.dashboard.stats.win_rate.toFixed(1)}%</h2></div>
<div class="card"><span>TOTAL PIPS</span><h2>${s.dashboard.stats.total_pips.toFixed(1)}</h2></div>
</div>

<div class="glass section">
<h2>üéØ Active Signals</h2>
${s.signals.map(sig=>`
<div class="signal">
<div class="signal-head">
<div>
<h3>${sig.pair}</h3>
<div class="badge ${sig.direction==="BUY"?"buy":"sell"}">${sig.direction}</div>
<p>${sig.strategy} ‚Ä¢ ${(sig.confidence*100).toFixed(0)}%</p>
</div>
</div>
<div class="grid-3">
<div class="box">ENTRY<br><b>${sig.entry_price.toFixed(5)}</b></div>
<div class="box">SL<br><b>${sig.sl.toFixed(5)}</b></div>
<div class="box">TP<br><b>${sig.tp.toFixed(5)}</b></div>
</div>
</div>
`).join("")}
</div>

<div class="glass section">
<h2>üîå News API Load</h2>
<div class="api">
${Object.entries(s.news).map(([k,v])=>`
<div class="card">
<b>${k.toUpperCase()}</b>
<div class="bar">
<div class="fill" style="width:${(v.calls/v.limit)*100}%;background:${(v.calls/v.limit)>0.8?"var(--red)":"var(--green)"}"></div>
</div>
<p>${v.calls}/${v.limit} calls</p>
</div>
`).join("")}
</div>
</div>

<div class="glass section">
<h2>üåê Price Source Rotation</h2>
<p>Active Provider: <b>${s.price.active_provider}</b></p>
<p>Queue: ${s.price.rotation_queue.join(" ‚Üí ")}</p>
</div>

<footer>
üöÄ Trade Beacon Neural Engine ‚Äî State-Driven Intelligence
</footer>
`;
}

/* ================= START ================= */
(async()=>{
    const state=await loadState();
    render(state);
    setInterval(async()=>{
        render(await loadState());
    },10000);
})();
</script>

</body>
</html>
